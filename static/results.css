/* ===========================
   Results page overrides
   =========================== */

/* 1) Wider container on desktop, comfortable gutters on mobile */
.results-container {
  /* Inherit base container spacing but allow a wider max */
  max-width: 1280px; /* was likely ~960; increase width per your request */
  margin: 0 auto;
  padding-inline: 16px;
}

/* 2) Header block */
.results-head { display: flex; flex-direction: column; gap: 6px; }
.results-title { font-size: clamp(1.25rem, 1.2rem + 0.5vw, 1.6rem); line-height: 1.2; }
.results-meta { font-size: .95rem; }

/* 3) A reusable scroller that NEVER overflows the card */
.table-wrap {
  width: 100%;
  max-width: 100%;
}

.h-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
}

/* Give scrollers “breathing room” so box shadows/borders aren’t clipped */
.card .h-scroll { border: 1px solid var(--line); border-radius: 10px; }
.card .h-scroll > .table,
.card .h-scroll > table {
  border-collapse: separate;
  border-spacing: 0;
  min-width: 640px; /* ensures sensible minimum without exploding past card */
}

/* 4) Results table layout – stays table on mobile, but scrolls horizontally */
.table-results {
  width: 100%;
  table-layout: fixed;
}
.table-results th, .table-results td { white-space: nowrap; padding: 10px 12px; }
.table-results th:nth-child(2), .table-results td:nth-child(2) { min-width: 260px; }

.team-cell { display: flex; align-items: center; gap: 10px; min-width: 0; }
.team-logo { width: 28px; height: 28px; object-fit: contain; }
.team-name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Deltas */
.delta { font-weight: 700; }
.delta.up   { color: #16a34a; } /* green */
.delta.down { color: #dc2626; } /* red */
.delta.flat { color: #94a3b8; }

/* 5) Stats grid that won’t overflow */
.stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.stats-grid .span-2 { grid-column: 1 / -1; }

@media (max-width: 1000px) {
  .stats-grid { grid-template-columns: 1fr; }
}

.split-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
@media (max-width: 900px) {
  .split-cols { grid-template-columns: 1fr; }
}

/* Ensure inner tables play nicely with the scroller wrapper */
.card .table-wrap .table,
.card .table-wrap table {
  width: 100%;
}

/* Optional: keep very small stat tables readable without wrapping to two lines */
.card .table-wrap thead th,
.card .table-wrap tbody td {
  white-space: nowrap;
}

/* 6) Ballot grid – fix sticky header location & keep inside card */
.ballot-grid-wrap {
  position: relative;          /* needed for sticky children to respect this scroll box */
  overflow: auto;
  border: 1px solid var(--line);
  border-radius: 10px;
  max-width: 100%;
}

.ballot-grid {
  border-collapse: separate;
  border-spacing: 0;
  width: max-content; /* allows horizontal scroll to see all ranks */
  min-width: 100%;    /* but fill card on wide screens */
}

/* Cells */
.ballot-grid th, .ballot-grid td {
  padding: 6px 8px;
  border-bottom: 1px solid var(--line);
  border-right: 1px solid var(--line);
}

/* Sticky first column (voter) */
.ballot-grid th:first-child,
.ballot-grid td:first-child {
  position: sticky;
  left: 0;
  background: var(--panel-2, #10141c);
  z-index: 2; /* below header row, above cells */
}

/* Sticky header row – stick to TOP OF THE GRID, not offset mid-table */
.ballot-grid thead th {
  position: sticky;
  top: 0; /* ← key change: was using a site header offset; remove so it pins to grid top */
  background: var(--panel-2, #10141c);
  z-index: 3; /* above sticky first column */
}

/* Images in cells */
.ballot-grid .grid-cell { text-align: center; }
.ballot-grid .grid-cell img {
  width: 22px; height: 22px; object-fit: contain; display: block; margin: 0 auto;
}
.voter-name { white-space: nowrap; max-width: 160px; overflow: hidden; text-overflow: ellipsis; }

@media (max-width: 768px){
  .ballot-grid .grid-cell img { width: 18px; height: 18px; }
}

/* 7) “Others receiving votes” readability */
.others { line-height: 1.5; }

/* 8) Small utility that helps tables not smash against card edges on very narrow phones */
@media (max-width: 420px) {
  .results-container { padding-inline: 10px; }
}

/* 9) Make the whole page willing to scroll horizontally on small devices rather than over-compressing */
html, body {
  overflow-x: hidden;
}
.container, .card, .table-wrap, .h-scroll {
  max-width: 100%;
}

/* ---------- Results: Poll Stats containment & responsiveness ---------- */

/* Widen overall page a bit while keeping nice margins */
.container.results-container {
  max-width: 1280px;           /* wider page as requested */
  margin-inline: auto;
  padding-inline: clamp(12px, 3vw, 24px);
  box-sizing: border-box;
}

/* The stats card is the bounding box: nothing escapes */
.stats-card {
  overflow: hidden;            /* hard cap: no child bleeds out */
  display: block;
  position: relative;
}

.stats-card__header {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.stats-card__title {
  margin: 0;
  line-height: 1.2;
}

/* Grid always fits inside the card; children cannot expand it */
.stats-grid {
  --gap: 16px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--gap);
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  contain: layout paint;       /* isolates layout/paint to this card */
}

@media (max-width: 980px) {
  .stats-grid { grid-template-columns: 1fr; }
}

/* Each section is prevented from forcing the grid to grow */
.stats-section {
  min-width: 0;                /* critical: allows content to shrink */
  width: 100%;
  max-width: 100%;
}

.stats-section--span2 {
  grid-column: 1 / -1;
}

/* Split columns inside the span-2 section */
.split-cols {
  --gap: 12px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--gap);
  min-width: 0;
  width: 100%;
  max-width: 100%;
}

@media (max-width: 900px) {
  .split-cols { grid-template-columns: 1fr; }
}

.stats-section__title,
.stats-subsection__title {
  margin: 0 0 6px 0;
}

/* Table wrapper: scroll INSIDE the card, never outside */
.stat-table-wrap {
  --pad: 10px;
  position: relative;
  overflow-x: auto;            /* horizontal scroll lives here */
  overflow-y: hidden;
  border: 1px solid var(--line);
  border-radius: 10px;
  background: var(--panel-0, #090e16);
  padding: var(--pad);
  max-width: 100%;
  box-sizing: border-box;
  -webkit-overflow-scrolling: touch;
}

/* Tables themselves never dictate card width */
.stats-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  table-layout: fixed;         /* equal columns; prevents blowout */
  min-width: 520px;            /* allow scrolling for small screens */
}

.stats-table th,
.stats-table td {
  padding: 8px 10px;
  border-bottom: 1px solid var(--line);
  word-break: break-word;
}

.stats-table th.num,
.stats-table td.num {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

/* Utility to clip long names without expanding the table */
.truncate {
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Tighten nested elements so they don't add phantom width */
.stats-card * {
  max-width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

/* Fix margins in nested paragraphs/headings so content doesn't nudge outside */
.stats-card p { margin: 6px 0 10px; }
.stats-card h3 { margin: 2px 0 6px; }
.stats-card h4 { margin: 2px 0 6px; }

/* Optional: subtle scroll hint */
.stat-table-wrap::after {
  content: "";
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 20px;
  pointer-events: none;
  background: linear-gradient(to left, rgba(0,0,0,.18), transparent);
}

/* ---------- Optional: small polish for dark theme boundaries ---------- */
.stats-card .table thead th {
  background: var(--panel-2, #10141c);
  position: sticky;
  top: 0;                      /* sticky within the wrapper, not page */
  z-index: 1;
}

/* ---------------------------------------------------------
   MOBILE FONT SCALE for Results Page
   Applies only under the results container.
   --------------------------------------------------------- */
@media (max-width: 768px) {
  .results-container {
    font-size: 0.92rem;            /* slight global downshift */
    line-height: 1.35;
  }

  .results-container h1 {
    font-size: 1.3rem;
  }

  .results-container h2 {
    font-size: 1.15rem;
  }

  .results-container h3 {
    font-size: 1.05rem;
  }

  .results-container h4 {
    font-size: 0.98rem;
  }

  .results-container .small,
  .results-container .muted {
    font-size: 0.85rem;
  }

  /* Ensure tables remain crisp but compact */
  .results-container th,
  .results-container td {
    font-size: 0.88rem;
    padding: 6px 8px;
  }

  /* Mobile card list items benefit from a small reduction too */
  .mobile-list .mob-team {
    font-size: 0.95rem;
  }

  .mobile-list .chip {
    font-size: 0.78rem;
  }

  .mobile-list .mob-grid strong {
    font-size: 0.88rem;
  }

  .stats-card .stats-table th,
  .stats-card .stats-table td {
    font-size: 0.86rem;
  }
}
