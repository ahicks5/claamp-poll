/* ===========================
   Results page overrides
   =========================== */

/* 1) Wider container on desktop, comfortable gutters on mobile */
.results-container {
  /* Inherit base container spacing but allow a wider max */
  max-width: 1280px; /* was likely ~960; increase width per your request */
  margin: 0 auto;
  padding-inline: 16px;
}

/* 2) Header block */
.results-head { display: flex; flex-direction: column; gap: 6px; }
.results-title { font-size: clamp(1.25rem, 1.2rem + 0.5vw, 1.6rem); line-height: 1.2; }
.results-meta { font-size: .95rem; }

/* 3) A reusable scroller that NEVER overflows the card */
.table-wrap {
  width: 100%;
  max-width: 100%;
}

.h-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
}

/* Give scrollers “breathing room” so box shadows/borders aren’t clipped */
.card .h-scroll { border: 1px solid var(--line); border-radius: 10px; }
.card .h-scroll > .table,
.card .h-scroll > table {
  border-collapse: separate;
  border-spacing: 0;
  min-width: 640px; /* ensures sensible minimum without exploding past card */
}

/* 4) Results table layout – stays table on mobile, but scrolls horizontally */
.table-results {
  width: 100%;
  table-layout: fixed;
}
.table-results th, .table-results td { white-space: nowrap; padding: 10px 12px; }
.table-results th:nth-child(2), .table-results td:nth-child(2) { min-width: 260px; }

.team-cell { display: flex; align-items: center; gap: 10px; min-width: 0; }
.team-logo { width: 28px; height: 28px; object-fit: contain; }
.team-name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Deltas */
.delta { font-weight: 700; }
.delta.up   { color: #16a34a; } /* green */
.delta.down { color: #dc2626; } /* red */
.delta.flat { color: #94a3b8; }

/* 5) Stats grid that won’t overflow */
.stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.stats-grid .span-2 { grid-column: 1 / -1; }

@media (max-width: 1000px) {
  .stats-grid { grid-template-columns: 1fr; }
}

.split-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
@media (max-width: 900px) {
  .split-cols { grid-template-columns: 1fr; }
}

/* Ensure inner tables play nicely with the scroller wrapper */
.card .table-wrap .table,
.card .table-wrap table {
  width: 100%;
}

/* Optional: keep very small stat tables readable without wrapping to two lines */
.card .table-wrap thead th,
.card .table-wrap tbody td {
  white-space: nowrap;
}

/* 6) Ballot grid – fix sticky header location & keep inside card */
.ballot-grid-wrap {
  position: relative;          /* needed for sticky children to respect this scroll box */
  overflow: auto;
  border: 1px solid var(--line);
  border-radius: 10px;
  max-width: 100%;
}

.ballot-grid {
  border-collapse: separate;
  border-spacing: 0;
  width: max-content; /* allows horizontal scroll to see all ranks */
  min-width: 100%;    /* but fill card on wide screens */
}

/* Cells */
.ballot-grid th, .ballot-grid td {
  padding: 6px 8px;
  border-bottom: 1px solid var(--line);
  border-right: 1px solid var(--line);
}

/* Sticky first column (voter) */
.ballot-grid th:first-child,
.ballot-grid td:first-child {
  position: sticky;
  left: 0;
  background: var(--panel-2, #10141c);
  z-index: 2; /* below header row, above cells */
}

/* Sticky header row – stick to TOP OF THE GRID, not offset mid-table */
.ballot-grid thead th {
  position: sticky;
  top: 0; /* ← key change: was using a site header offset; remove so it pins to grid top */
  background: var(--panel-2, #10141c);
  z-index: 3; /* above sticky first column */
}

/* Images in cells */
.ballot-grid .grid-cell { text-align: center; }
.ballot-grid .grid-cell img {
  width: 22px; height: 22px; object-fit: contain; display: block; margin: 0 auto;
}
.voter-name { white-space: nowrap; max-width: 160px; overflow: hidden; text-overflow: ellipsis; }

@media (max-width: 768px){
  .ballot-grid .grid-cell img { width: 18px; height: 18px; }
}

/* 7) “Others receiving votes” readability */
.others { line-height: 1.5; }

/* 8) Small utility that helps tables not smash against card edges on very narrow phones */
@media (max-width: 420px) {
  .results-container { padding-inline: 10px; }
}

/* 9) Make the whole page willing to scroll horizontally on small devices rather than over-compressing */
html, body {
  overflow-x: hidden;
}
.container, .card, .table-wrap, .h-scroll {
  max-width: 100%;
}
